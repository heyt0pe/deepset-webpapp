<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Learning App</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/modal.css">
    <link rel="stylesheet" href="css/addons.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
</head>

<body>
    <header>
        <div class="menu-container" onclick="toggleMenu()">
            <i class="menu">menu</i>
            <div class="menu-content" id="menu">
                <span onclick="openModal()">
                    <i>settings</i>
                    Settings
                </span>
            </div>
        </div>
    </header>
    <section class="main-wrapper">
        <h1>Haystack Machine Learning Demo</h1>
        <p>Ask any question on this topic and see if Haystack can find the correct answer to your query!</p>
        <p style="font-style: italic;">
            Long Form Question and Answer and Retrieval-Augmented Generation are both Generative Question and Answer
            models. Extractive models highlight a portion of text from a document as an answer, while Generative models
            create novel text answers, composed by gathering context from different documents.
        </p>
        <p style="font-style: italic;">
            Due to the nature of Generative models, since the text returned as answers are not actual texts from
            specific documents, but rather new text generated by going through the documents, there's no page number for its answers,
            only the different documents that were used to generate the answer
        </p>
        <p style="font-style: italic;">
            Note: do not use keywords, but full-fledged questions. The demo is not optimized
            to deal with keyword queries and might misunderstand you.
        </p>
        <input placeholder="Ask a question" maxlength="100" id='query-text' type="text">
        <div class="buttons-wrapper">
            <button onclick="LFQAQuery()">
                Generate Answer
            </button>
            <button onclick="RAGQuery()">
                Generate Novel Answer
            </button>
            <button onclick="ExtractiveQuery()">
                Generate Extractive Answer
            </button>
        </div>
        <section class="loading">
            <h4>Haystack is running your query</h4>
            <div class="loader"></div>
        </section>
        <section class="results">
            <h3>Results:</h3>
            <section id="answers">
            </section>

            <h4 id="debug-info-header">Debug Info:</h4>
            <section id="debug-info-section">
                <pre>
                    <code id="debug-section"></code>
                </pre>
            </section>
        </section>
    </section>

    <div id="settings" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Settings</h3>
                <i onclick="closeModal()">close</i>
            </div>
            <div class="modal-section">
                <label>Max. number of answers</label>
                <input type="range" min="1" max="10" value="3" class="slider" id="max-ans-range">
                <div class="slider-wrapper">
                    <span>1</span>
                    <h4 id="max-ans">3</h4>
                    <span>10</span>
                </div>
            </div>
            <div class="modal-section">
                <label>Max. number of documents from retriever</label>
                <input type="range" min="1" max="10" value="3" class="slider" id="max-doc-range">
                <div class="slider-wrapper">
                    <span>1</span>
                    <h4 id="max-doc">3</h4>
                    <span>10</span>
                </div>
            </div>
            <!-- <div class="modal-section checkbox-section">
                <input type="checkbox" id="eval-mode">
                <label for="eval-mode">Evaluation mode</label>
            </div> -->
            <div class="modal-section checkbox-section">
                <input type="checkbox" id="debug-info">
                <label for="debug-info">Show debug info</label>
            </div>
            <div class="modal-section">
                <h4>File Upload</h4>
                <span class="file-upload-info">Limit 200MB per file â€¢ PDF, TXT, DOCX</span>
                <input type="file" id="files" multiple>
                <label for="files" class="file-upload">Upload files</label>
            </div>
        </div>
    </div>
    <div id="snackbar"></div>

    <script src="js/menu.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/query.js"></script>
    <script src="js/helpers.js"></script>
</body>

</html>